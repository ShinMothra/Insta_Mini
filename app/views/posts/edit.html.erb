<div class="card mx-auto mt-10 p-6 shadow-md rounded-xl max-w-xl bg-white">
  <h1 class="text-2xl font-bold text-center mb-4 text-gray-800">✏️ Редактировать пост</h1>

  <%= form_with model: @post, local: true, html: { multipart: true, class: "space-y-4" } do |form| %>
    
    <% if @post.errors.any? %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded">
        <ul>
          <% @post.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div>
      <%= form.label :caption, "Подпись", class: "block font-semibold text-gray-700" %>
      <%= form.text_area :caption, rows: 3, class: "w-full border-gray-300 rounded p-2 shadow-sm" %>
    </div>

    <div>
      <%= form.label :image, "Новое изображение (опционально)", class: "block font-semibold text-gray-700" %>
      <%= form.file_field :image, class: "w-full border-gray-300 rounded p-2 shadow-sm" %>
    </div>

    <% if @post.image.attached? %>
      <div class="text-center">
        <p class="text-gray-600 mb-2">Текущее изображение:</p>
        <%= image_tag @post.image.variant(resize_to_limit: [300, 300]), class: "mx-auto rounded shadow" %>
      </div>
    <% end %>

    <div class="text-center">
      <%= form.submit "Сохранить", class: "bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded shadow" %>
    </div>

  <% end %>
</div>
